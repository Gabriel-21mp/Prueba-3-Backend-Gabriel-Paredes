<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Reporte de pedidos</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<a href="/admin/">‚Üê Volver al Admin</a>

<h1>Reporte de pedidos por estado</h1>

<table border="1" cellpadding="6">
    <tr>
        <th>Estado</th>
        <th>Total</th>
    </tr>
    {% for p in pedidos_por_estado %}
    <tr>
        <td>{{ p.estado_pedido }}</td>
        <td>{{ p.total }}</td>
    </tr>
    {% endfor %}
</table>

<canvas id="graficoPedidos" width="400" height="200"></canvas>

<script>
const data = {
    labels: [{% for p in pedidos_por_estado %}"{{ p.estado_pedido }}",{% endfor %}],
    datasets: [{
        label: 'Pedidos por estado',
        data: [{% for p in pedidos_por_estado %}{{ p.total }},{% endfor %}],
        backgroundColor: 'rgba(54, 162, 235, 0.6)'
    }]
};

new Chart(document.getElementById('graficoPedidos'), {
    type: 'bar',
    data: data
});
</script>

</body>
</html>
